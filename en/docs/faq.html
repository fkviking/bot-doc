<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13. Frequently Asked Questions | Documentation for Viking&#39;s trading robots</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="icon" href="/bot-doc/favicon.ico">
    <meta name="description" content="User guide, algorithm description and API">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/bot-doc/assets/css/0.styles.6701afdc.css" as="style"><link rel="preload" href="/bot-doc/assets/js/app.9ff887b2.js" as="script"><link rel="preload" href="/bot-doc/assets/js/2.838bb34b.js" as="script"><link rel="preload" href="/bot-doc/assets/js/48.a5af94a9.js" as="script"><link rel="preload" href="/bot-doc/assets/js/26.6f356218.js" as="script"><link rel="prefetch" href="/bot-doc/assets/js/1.afddc6e9.js"><link rel="prefetch" href="/bot-doc/assets/js/11.0da1be66.js"><link rel="prefetch" href="/bot-doc/assets/js/12.d01be575.js"><link rel="prefetch" href="/bot-doc/assets/js/13.02da4c1d.js"><link rel="prefetch" href="/bot-doc/assets/js/14.ddc6c31a.js"><link rel="prefetch" href="/bot-doc/assets/js/15.cef79c51.js"><link rel="prefetch" href="/bot-doc/assets/js/16.17bc3a44.js"><link rel="prefetch" href="/bot-doc/assets/js/17.bc69b124.js"><link rel="prefetch" href="/bot-doc/assets/js/18.892cf449.js"><link rel="prefetch" href="/bot-doc/assets/js/19.2cb09572.js"><link rel="prefetch" href="/bot-doc/assets/js/20.06660988.js"><link rel="prefetch" href="/bot-doc/assets/js/21.341785c2.js"><link rel="prefetch" href="/bot-doc/assets/js/22.81458f36.js"><link rel="prefetch" href="/bot-doc/assets/js/23.e10dba31.js"><link rel="prefetch" href="/bot-doc/assets/js/24.5f00b0c1.js"><link rel="prefetch" href="/bot-doc/assets/js/25.c23c90cc.js"><link rel="prefetch" href="/bot-doc/assets/js/27.3727a712.js"><link rel="prefetch" href="/bot-doc/assets/js/28.7eadd82b.js"><link rel="prefetch" href="/bot-doc/assets/js/29.9b8ce8ee.js"><link rel="prefetch" href="/bot-doc/assets/js/3.9ce79b6a.js"><link rel="prefetch" href="/bot-doc/assets/js/30.48a88a1b.js"><link rel="prefetch" href="/bot-doc/assets/js/31.977f2adf.js"><link rel="prefetch" href="/bot-doc/assets/js/32.c1e2b0ae.js"><link rel="prefetch" href="/bot-doc/assets/js/33.03f79912.js"><link rel="prefetch" href="/bot-doc/assets/js/34.d53a4518.js"><link rel="prefetch" href="/bot-doc/assets/js/35.065ed9e5.js"><link rel="prefetch" href="/bot-doc/assets/js/36.04d4d8a6.js"><link rel="prefetch" href="/bot-doc/assets/js/37.6820b499.js"><link rel="prefetch" href="/bot-doc/assets/js/38.0abccf5a.js"><link rel="prefetch" href="/bot-doc/assets/js/39.2086f6a6.js"><link rel="prefetch" href="/bot-doc/assets/js/4.7a0878b4.js"><link rel="prefetch" href="/bot-doc/assets/js/40.827f5d16.js"><link rel="prefetch" href="/bot-doc/assets/js/41.f271db93.js"><link rel="prefetch" href="/bot-doc/assets/js/42.0a85d905.js"><link rel="prefetch" href="/bot-doc/assets/js/43.61ca7f3d.js"><link rel="prefetch" href="/bot-doc/assets/js/44.dd1787ee.js"><link rel="prefetch" href="/bot-doc/assets/js/45.f472a853.js"><link rel="prefetch" href="/bot-doc/assets/js/46.a5cf8193.js"><link rel="prefetch" href="/bot-doc/assets/js/47.56652151.js"><link rel="prefetch" href="/bot-doc/assets/js/49.d9a38baf.js"><link rel="prefetch" href="/bot-doc/assets/js/5.a4b9db76.js"><link rel="prefetch" href="/bot-doc/assets/js/50.d163e34e.js"><link rel="prefetch" href="/bot-doc/assets/js/51.bb84e970.js"><link rel="prefetch" href="/bot-doc/assets/js/52.a37f1349.js"><link rel="prefetch" href="/bot-doc/assets/js/6.216be7b2.js"><link rel="prefetch" href="/bot-doc/assets/js/7.a0739e8f.js"><link rel="prefetch" href="/bot-doc/assets/js/8.4ce14e89.js"><link rel="prefetch" href="/bot-doc/assets/js/vendors~docsearch.1f8fb848.js">
    <link rel="stylesheet" href="/bot-doc/assets/css/0.styles.6701afdc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-doc/en/" class="home-link router-link-active"><img src="/bot-doc/images/vkg_logo.svg" alt="Documentation for Viking's trading robots" class="logo"> <span class="site-name can-hide">Documentation for Viking's trading robots</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bot-doc/en/docs/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">üá∫üá∏ EN</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">üá∫üá∏ EN</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bot-doc/docs/faq.html" class="nav-link">
  üá∑üá∫ RU
</a></li><li class="dropdown-item"><!----> <a href="/bot-doc/en/docs/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  üá∫üá∏ EN
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bot-doc/en/docs/introduction.html" class="nav-link">
  Documentation
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">üá∫üá∏ EN</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">üá∫üá∏ EN</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bot-doc/docs/faq.html" class="nav-link">
  üá∑üá∫ RU
</a></li><li class="dropdown-item"><!----> <a href="/bot-doc/en/docs/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  üá∫üá∏ EN
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bot-doc/en/docs/change-history.html" class="sidebar-link">1. Change Log</a></li><li><a href="/bot-doc/en/docs/introduction.html" class="sidebar-link">2. About the Platform</a></li><li><a href="/bot-doc/en/docs/interface.html" class="sidebar-link">3. Website Interface</a></li><li><a href="/bot-doc/en/docs/getting-started.html" class="sidebar-link">4. Getting Started</a></li><li><a href="/bot-doc/en/docs/stable-work.html" class="sidebar-link">5. Providing Feedback</a></li><li><a href="/bot-doc/en/docs/creating-connection.html" class="sidebar-link">6. Adding Connections</a></li><li><a href="/bot-doc/en/docs/params-description.html" class="sidebar-link">7. Parameters Description</a></li><li><a href="/bot-doc/en/docs/algorithm-comments.html" class="sidebar-link">8. Algorithm Notes</a></li><li><a href="/bot-doc/en/docs/order-error.html" class="sidebar-link">9. Order Submission, Cancellation, and Modification Errors</a></li><li><a href="/bot-doc/en/docs/c-api.html" class="sidebar-link">10. Formulas in C++</a></li><li><a href="/bot-doc/en/docs/api.html" class="sidebar-link">11. WebSocket API</a></li><li><a href="/bot-doc/en/docs/comparison.html" class="sidebar-link">12. Comparison of C++ Formulas and WebSocket API</a></li><li><a href="/bot-doc/en/docs/faq.html" aria-current="page" class="active sidebar-link">13. Frequently Asked Questions</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frequently-asked-questions" tabindex="-1"><a href="#frequently-asked-questions" class="header-anchor">#</a> <div class="anchor-container"><span id="frequently-asked-questions" class="anchor-target"></span> <a href="#frequently-asked-questions" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div> Frequently Asked Questions</h1> <ul><li><details><summary><i>Problem with the exchange trading connection: the robot does not place orders / does not see trades, but the situation does not allow stopping trading for a long time.<div class="anchor-container"><span id="faq.lost_orders" class="anchor-target"></span> <a href="#faq.lost_orders" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <ol><li>Send an email to support describing the issue;</li> <li>Disable trading for all portfolios using this trading connection; make sure there are no active orders left;</li> <li>Reset order statuses for all portfolios from step 2. The <code>Reset statuses</code> functionality is described <a href="/bot-doc/en/docs/getting-started.html#portfolio_actions.reset_statuses">here</a>;</li> <li>Reconnect the problematic trading connection;</li> <li>Enable trading for the portfolios from step 2;</li> <li>If the problem reoccurs within a couple of hours, disable trading for all portfolios using this trading connection and do not enable it again until you receive a response from support.</li></ol></details></li></ul> <hr> <ul><li><details><summary><i>Trading turns on and off spontaneously. What could be causing this?<div class="anchor-container"><span id="faq.timetable" class="anchor-target"></span> <a href="#faq.timetable" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Most likely, a trading schedule has been set, or this behavior has been explicitly programmed in the formulas.</p></details></li></ul> <hr> <ul><li><details><summary><i>The robot is not trading. Almost all connections are disconnected. What could be the reason?<div class="anchor-container"><span id="faq.license" class="anchor-target"></span> <a href="#faq.license" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The most probable cause is an expired license. Check how many days are left until the license expires. The number of remaining paid days can be viewed in the <a href="/bot-doc/en/docs/interface.html#robots_table">Robots</a> widget, in the table row corresponding to this robot, under the <code>Days paid</code> column.</p></details></li></ul> <hr> <ul><li><details><summary><i>Added a portfolio, all exchange connections are active, trading is enabled, but orders for the first leg are not being placed. What could be the reason?<div class="anchor-container"><span id="faq.prompt" class="anchor-target"></span> <a href="#faq.prompt" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>When you hover over the portfolio name in the portfolio list, a tooltip appears. It separately indicates for buy and sell of the first leg what conditions are missing for the robot to place an order.
For example, the tooltip string for portfolio selling may look like this: &quot;<code>sell: is signal=1, quantity=5, is valid market volume=1, is price check=0, is max not hedged=1, is orderbook valid=1</code>.
<code>is_signal</code> means whether there is a buy/sell signal (i.e. either we are currently quoting, or the condition for <a href="/bot-doc/en/docs/params-description.html#p.sell">Sell</a> and <a href="/bot-doc/en/docs/params-description.html#p.lim_s">Lim_Sell</a> is met). If the signal is present, the value is 1; otherwise, 0. All check values can only be 0 or 1 unless otherwise specified.
<code>quantity</code> shows the volume of the order the robot intends to place based on the portfolio settings. An order will be placed only if the volume is positive. A negative volume is not an error‚Äîit is simply the result of calculations.
<code>is valid market volume</code> indicates whether the <a href="/bot-doc/en/docs/params-description.html#p.mkt_volume">Market volume</a> check has passed.
<code>is price check</code> indicates whether the <a href="/bot-doc/en/docs/params-description.html#p.price_check">Price check</a> condition has been satisfied.
<code>is max not hedged</code> indicates whether the <a href="/bot-doc/en/docs/params-description.html#p.max_not_hedged">Max not hedget</a> condition is met for orders on the second leg.
<code>is orderbook valid</code> reflects external signs of order book validity. The order book is considered invalid if the bid and ask sides overlap.
Thus, an order is placed only when all values are greater than zero.</p></details></li></ul> <hr> <ul><li><details><summary><i>The required instrument is missing from the exchange instrument list. Where can I get it?<div class="anchor-container"><span id="faq.no_security" class="anchor-target"></span> <a href="#faq.no_security" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The list of financial instruments in the robot is updated every morning at 6:05 server time. You can check the server time in the <a href="/bot-doc/en/docs/interface.html#robots_table">Robots</a> widget, in the row corresponding to this robot, under the <code>Robot time</code>. column. To reload the instrument list, click <code>Reload security list from exchanges</code>. If you do not see a particular financial instrument in the list (and you have already updated it), but the instrument is already available on the exchange, either wait until the scheduled update time when the instrument will be added automatically, or reconnect the market data connection and then refresh the financial instrument list.</p></details></li></ul> <hr> <ul><li><details><summary><i>New financial instruments were added on the exchange today, but I don't see them in the robot. What should I do?<div class="anchor-container"><span id="faq.new_security" class="anchor-target"></span> <a href="#faq.new_security" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>New financial instruments are loaded early in the morning, and the robot might not have had time to pick them up yet. You need to reconnect the market data feed to the exchange, then refresh the financial instrument list‚Äîthe new instruments will become available.</p></details></li></ul> <hr> <ul><li><details><summary><i>I added a portfolio, changed its settings, but the changes did not apply and the portfolio disappeared. What is happening?<div class="anchor-container"><span id="faq.another_user" class="anchor-target"></span> <a href="#faq.another_user" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Check whether you are the only one editing the robot. It's possible that your colleague is making changes at the same time, and you are interfering with each other.</p></details></li></ul> <hr> <ul><li><details><summary><i>The robot has become slower at executing trades. What could be causing this?<div class="anchor-container"><span id="faq.making deals" class="anchor-target"></span> <a href="#faq.making deals" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The speed at which the exchange matches orders depends on many factors that the robot cannot influence. For example, if your order for 1000 hits the opposite side of the order book, there is a significant difference between it being matched against a single opposing order of 1000 (or more), or being matched against 1000 separate orders of size 1 each. The second scenario will naturally take the exchange longer to process.</p> <p>Looking at the broader picture‚Äîfrom the moment the robot receives market data to the moment an order is filled‚Äîbesides the robot‚Äôs market data processing speed, order submission speed, and the exchange‚Äôs matching speed, a major factor is the current market situation (availability of counterparty liquidity).</p></details></li></ul> <hr> <ul><li><details><summary><i>–üWhy is volume being placed multiple times at the same spread? My K parameter is non-zero.<div class="anchor-container"><span id="faq.limits_shifting" class="anchor-target"></span> <a href="#faq.limits_shifting" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p><a href="/bot-doc/en/docs/params-description.html#p.sell">Sell</a> has become significantly greater than <a href="/bot-doc/en/docs/params-description.html#p.lim_s">Lim_Sell</a>, and as a result, when shifting by <a href="/bot-doc/en/docs/params-description.html#p.k">K</a>, the system is chasing the market price.
Example: You want to sell at 100, K=1. At some point, the market price jumps to 105. You sell at 105, but according to the algorithm, the robot first sold at 100, then shifted by K and started selling at 101. It sold again at 105, then shifted again by K to 102, sold once more at 105, and so on. Thus, all these sales occur at the price of 105.</p></details></li></ul> <hr> <ul><li><details><summary><i>How can I reduce slippage on second-leg instruments?<div class="anchor-container"><span id="faq.k_percent_of_quantity" class="anchor-target"></span> <a href="#faq.k_percent_of_quantity" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>To address this, pay attention to the <a href="/bot-doc/en/docs/params-description.html#s.k">k</a> and <a href="/bot-doc/en/docs/params-description.html#s.percent_of_quantity">Percent of quantity</a> parameters for the second-leg instrument in the <code>Securities</code> section. Proper tuning of these parameters can significantly affect the execution quality of second-leg orders.</p> <p>Increasing the <a href="/bot-doc/en/docs/params-description.html#s.k">k</a> value may potentially worsen execution price but increases the likelihood of order fill. Increasing <a href="/bot-doc/en/docs/params-description.html#s.percent_of_quantity">Percent of quantity</a> helps achieve more reliable hedging, as the first-leg order will only be placed when sufficient volume is available for hedging on the second leg.</p></details></li></ul> <hr> <ul><li><details><summary><i>I frequently encounter the REASON_FLOOD error. What should I do to avoid it?<div class="anchor-container"><span id="faq.reason_flood" class="anchor-target"></span> <a href="#faq.reason_flood" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p><strong>If the error occurs when placing orders for <a href="/bot-doc/en/docs/params-description.html#s.is_first">Is first</a> instruments:</strong></p> <p>This error indicates the use of quoting mode (<a href="/bot-doc/en/docs/params-description.html#p.quote">Quote</a>). You may try trading without quoting mode, which reduces the frequency of transaction submissions. If quoting mode is essential, review the &quot;Anti-spam&quot; group parameters, particularly <a href="/bot-doc/en/docs/params-description.html#p.delta">Delta</a>.
<a href="/bot-doc/en/docs/params-description.html#p.delta">Delta</a> - defines the deviation of <a href="/bot-doc/en/docs/params-description.html#p.price_s">Price_s/Price_b</a> from the currently placed order's price that triggers an order re-quoting (i.e., a new transaction). Set this value so that minor price fluctuations do not cause constant order replacement. For example, if you are trading BTCUSD priced at 10,000, setting <a href="/bot-doc/en/docs/params-description.html#p.delta">Delta</a> to 1 means even a $1 change will trigger a re-quote. Given how often prices fluctuate by $1 at this level, the robot could send multiple cancel-and-replace commands per second‚Äîthis causes exchange flooding. Setting <a href="/bot-doc/en/docs/params-description.html#p.delta">Delta</a> to 5‚Äì10 reduces flood risk, as a more significant price move is required before sending new orders.
Adjust the <a href="/bot-doc/en/docs/params-description.html#p.mkt_volume">Market volume</a> parameter. If there is already a large volume ahead of your order, there‚Äôs little benefit in placing your order immediately, helping to avoid spamming the exchange with replacements.
<strong>Important:</strong> In <code>bid/offer</code> trading mode, this parameter only considers bid and offer volumes. Any additional depth behind them remains invisible to the robot, which may still place orders. Therefore, use this parameter primarily in <code>orderbook</code> or <code>orderbook+filter</code> modes.<br>
Use the <a href="/bot-doc/en/docs/params-description.html#p.price_check">Price check</a> parameter. If <a href="/bot-doc/en/docs/params-description.html#p.price_s">Price_s/Price_b</a> differs from <code>bid/offer</code> by more than <a href="/bot-doc/en/docs/params-description.html#p.price_check">Price check</a> points, do not quote‚Äîthis also prevents unnecessary exchange spam. Naturally, lower values result in less frequent order updates.
You can also set a larger <a href="/bot-doc/en/docs/params-description.html#s.tp">TP</a> to take profit less frequently but in larger amounts.</p> <p><strong>If the error occurs when placing orders for non-Is first instruments:</strong></p> <p>It is likely that the first-leg order is being filled in small portions, and after each such trade, hedging orders are being placed for second-leg instruments. Pay attention to the <a href="/bot-doc/en/docs/params-description.html#p.overlay">Overlay</a>parameter, which allows placing hedging orders not after every single first-leg trade, thus reducing order frequency.</p> <p><strong>Important!</strong></p> <p>Flood control systems vary across platforms, so the bot's flood prevention mechanisms may be different for each transaction connection. When connecting to the Moscow Exchange, the bot implements a mechanism for tracking the number of transactions per unit of time, similar to the exchange's. This internal flood control mechanism doesn't provide 100% protection against real flooding due to the time difference between the bot and the exchange. While the time is initially synchronized, it takes a certain amount of time for the order to reach the exchange, causing a lag. This means that the windows in which the number of transactions is counted are slightly offset in time between the bot and the exchange, which can lead to flooding. Therefore, it's important to pay special attention to the &quot;Anti-Spam&quot; settings and the bot's logs, which report such errors.</p> <p>On the Moscow Exchange derivatives market, a transaction that fails flood control is considered erroneous (transactions may be erroneous for other reasons as well). If a large number of such transactions occur, the exchange imposes a penalty system. Detailed information on fees for erroneous transactions can be found on the Moscow Exchange <a href="https://www.moex.com/a3792" target="_blank" rel="noopener noreferrer">website<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></details></li></ul> <hr> <ul><li><details><summary><i>Trades in the robot do not match trades in the terminal. What could be the reason?<div class="anchor-container"><span id="faq.prompt" class="anchor-target"></span> <a href="#faq.prompt" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The robot does not use trade prices in its algorithm‚Äîthey are used only for display purposes. Moreover, on many connections it is impossible to obtain the exact price of a specific trade. For this reason, and to improve performance, the robot may record the order placement price or the average execution price of fills within an order as the trade price. Additionally, on some connections, several consecutive trades may be aggregated by the robot into a single trade with the total executed volume. This behavior is not erroneous‚Äîthere is no loss of position information.</p></details></li></ul> <hr> <ul><li><details><summary><i>I don't see a portfolio, but I'm sure I created it, and the robot won't let me create a new portfolio with the same name. What could be the issue?<div class="anchor-container"><span id="faq.filter" class="anchor-target"></span> <a href="#faq.filter" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Most likely, a filter is applied in the portfolios table, and the given portfolio is not selected in the filter. Click on the &quot;FILTER APPLIED&quot; label in the <a href="/bot-doc/en/docs/interface.html#portfolios_table">Portfolios table</a> widget and check the box next to the desired portfolio.</p></details></li></ul> <hr> <ul><li><details><summary><i>I cannot create a portfolio‚ÄîI receive a message saying a portfolio with this name already exists. I definitely did not create such a portfolio. What could be the reason?<div class="anchor-container"><span id="faq.not_your_portfolio" class="anchor-target"></span> <a href="#faq.not_your_portfolio" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>First, make sure you have not actually created this portfolio by checking the portfolio filter as described <a href="#faq.filter">above</a>. If that does not help, it is likely that a portfolio with this name already exists in the robot, created by another user. You cannot see portfolios created by other users, but portfolio names must be unique across all portfolios in the robot. If this occurs on a free robot, it is normal‚Äîsuch robots are indeed used by many traders. If this happens on a production robot, contact the Head of Traders to confirm whether someone else is using the same robot instance.</p></details></li></ul> <hr> <ul><li><details><summary><i>Is there a way to configure the robot to hedge part of the Is_first leg if less than 5 contracts are filled? For example: fill 2 on the first leg, hedge 3 on the second leg (while keeping Count at 5 to 8)?<div class="anchor-container"><span id="faq.n_perc_fill" class="anchor-target"></span> <a href="#faq.n_perc_fill" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Input data: <code>Curpos</code>=19, <code>Count</code>=5<br>
By default, the portfolio position is rounded down to the nearest integer value of <code>Curpos</code> divided by <code>Count</code> (main leg), so hedging occurs only when the portfolio position changes.<br>
When n_perc_fill=0, rounding down modulo, i.e. |19/5=3|;<br>
When n_perc_fill=80:<br>
Suppose the position changes to Curpos=18, integer division |18/5|=3 - unchanged,
remainder  =3. (100 - n_perc_fill)=100-80=20, 20% of count (i.e. of  5) =1, 80% of count =4.<br>
The remainder 3 falls within the range between 1 and 4, so the portfolio position remains unchanged. Pos=3.<br>
Thus, the position will decrease only when Curpos&lt;=15 and increase when Curpos&gt;=20.</p></details></li></ul> <hr> <ul><li><details><summary><i>How to set up notifications for sharp changes in spreads?<div class="anchor-container"><span id="faq.notifications" class="anchor-target"></span> <a href="#faq.notifications" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Notifications are configured in the portfolio settings on the <code>Notifications</code> tab.</p></details></li></ul> <hr> <ul><li><details><summary><i>In the Financial result section, the asset price is often displayed instead of the spread (delta). How does this affect Average sell and buy?<div class="anchor-container"><span id="faq.fin_res" class="anchor-target"></span> <a href="#faq.fin_res" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Calculations are based on trades executed during the selected period, calculated separately for buys and sells, not based on spreads (delta). Therefore, whether the Financial result contains delta or price is irrelevant‚Äîit does not affect the calculation of Average sell and buy.</p></details></li></ul> <hr> <ul><li><details><summary><i>What order types does the robot use? Is it possible for the robot to place market orders?<div class="anchor-container"><span id="faq.order_type" class="anchor-target"></span> <a href="#faq.order_type" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The robot uses only limit quote orders. Placing market-type orders is not possible, but you can emulate them by placing a limit order deep into the opposite side of the order book using the <a href="/bot-doc/en/docs/params-description.html#s.k">k</a> parameter of the corresponding instrument in the portfolio settings under the <code>Securities</code> section.</p></details></li></ul> <hr> <ul><li><details><summary><i>What actions does the robot take when connection is lost on one leg?<div class="anchor-container"><span id="faq.connection_lost" class="anchor-target"></span> <a href="#faq.connection_lost" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>It depends on which leg and at what moment the connection was lost. If the first leg loses connection, the portfolio containing instruments from the exchange with the lost connection stops trading. If the connection to the second leg is lost and the first leg has not yet been filled, the robot also stops trading this portfolio. If the first leg was successfully filled, and at that moment the second leg had not yet placed its order but already lost connection, the robot will continue attempting to place the order (of course, rate limits are respected).</p></details></li></ul> <hr> <ul><li><details><summary><i>Do I need to keep the browser page open for everything to keep working? What will happen to my positions if I close the browser or restart my computer?<div class="anchor-container"><span id="faq.site" class="anchor-target"></span> <a href="#faq.site" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Robot operation does not depend on whether the browser tab is open for the user or not. You can close this page, open it elsewhere, access it simultaneously from multiple locations, restart your computer, etc.‚Äînone of this affects the robot's operation. The robots run on our servers and function autonomously. After logging in to the website, you gain the ability to manage the robots available to you. There is a separate option to run the robot on your own server.</p></details></li></ul> <hr> <ul><li><details><summary><i>On futures instruments of the Moscow Exchange, prices in the robot differ from those in the terminal. What could be the reason?<div class="anchor-container"><span id="faq.sintetic" class="anchor-target"></span> <a href="#faq.sintetic" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>The futures market of the Moscow Exchange uses synthetic matching, which is related to trading <a href="https://www.moex.com/ru/spreads" target="_blank" rel="noopener noreferrer">calendar spreads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. With synthetic matching, trades are formed based on orders arriving in different order books of linked instruments (two futures and a calendar spread). As a result, during matching, synthetic levels of any necessary depth are constructed to match active orders.</p> <p>In the robot, market data for the Moscow Exchange futures market is received exclusively via <code>Orderlog</code> streams using the <a href="/bot-doc/en/docs/creating-connection.html#tc.moex_fut_opt.fast">FAST</a> and <a href="/bot-doc/en/docs/creating-connection.html#tc.moex_fut_opt.simba">SIMBA</a> protocols, as this is the fastest method of obtaining market information.</p></details></li></ul> <hr> <ul><li><details><summary><i>I see error messages when placing orders for the portfolio, starting with &quot;Stop trading!!!&quot;, but trading for the portfolio has not been disabled yet, and the errors continue. How is this possible?<div class="anchor-container"><span id="faq.stop_trading" class="anchor-target"></span> <a href="#faq.stop_trading" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>This can happen when using formulas where the code directly controls the enabling of trading for the portfolio, or does so via schedule activation (using methods such as <code>set_re_sell</code>, <code>set_re_buy</code>, <code>set_use_tt</code>). When writing formulas, it is recommended to account for the possibility that the robot may disable trading on the portfolio upon receiving certain order placement errors.</p></details></li></ul> <hr> <ul><li><details><summary><i>I received an email requesting to stop trading due to a robot update. What exactly should I do?<div class="anchor-container"><span id="faq.robot_update" class="anchor-target"></span> <a href="#faq.robot_update" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>You must disable trading for all portfolios in the robot (for example, using the <a href="/bot-doc/en/docs/getting-started.html#portfolio_actions">actions</a> in the <a href="/bot-doc/en/docs/interface.html#portfolios_table">Portfolios table</a> widget) and ensure there are no active orders left on the exchange placed by the robot. It is not necessary to close your position to zero.</p> <p>Pay special attention when stopping trading for portfolios that use a <a href="/bot-doc/en/docs/params-description.html#p.use_tt">schedule</a> (if the schedule enables trading, it must be disabled), and for portfolios where the <a href="/bot-doc/en/docs/params-description.html#p.re_buy">re_sell/re_buy</a> flags are controlled via formulas (formulas for selected portfolios can be disabled together with trading using the <a href="/bot-doc/en/docs/getting-started.html#portfolio_actions.stop_formulas">Stop formulas</a>). action). Don‚Äôt forget to re-enable the schedule and formulas after the robot update.</p></details></li></ul> <hr> <ul><li><details><summary><i>Can I create portfolios and make changes to existing ones on non-trading days?<div class="anchor-container"><span id="faq.no_trading_days" class="anchor-target"></span> <a href="#faq.no_trading_days" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>You can edit portfolio settings on non-trading days. However, creating new portfolios or adding new instruments to existing ones is not guaranteed, because the robot requires an updated instrument list to perform these actions. If the robot has previously loaded the instrument list from the exchange, you will be able to create portfolios and add instruments even during non-trading hours. However, there may be cases when robots are restarted during non-trading hours for updates or maintenance. In such cases, the robot will only be able to reload the instrument list once market data transmission resumes on trading days. This is not an error. We reserve the right to restart robots and perform other maintenance during non-trading hours.</p></details></li></ul> <hr> <ul><li><details><summary><i>What are the system requirements for the computer on which the robot website will be opened?<div class="anchor-container"><span id="faq.requirements" class="anchor-target"></span> <a href="#faq.requirements" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>System requirements are described <a href="/bot-doc/en/docs/introduction.html#requirements">here</a>.</p></details></li></ul> <hr> <ul><li><details><summary><i>Does the robot require the 'Cancel on Disconnect' option to be enabled in the trading connection? <div class="anchor-container"><span id="faq.cod" class="anchor-target"></span> <a href="#faq.cod" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>Many exchanges and brokers offer the <code>Cancel on Disconnect</code> (CoD) option in their trading connections. This option means that if the connection between the robot and the exchange is lost, all orders placed by the robot will be automatically canceled by the exchange itself (without robot involvement). The robot does not use or rely on this mechanism: upon reconnection, the robot retrieves up-to-date order data from the exchange and updates its internal order statuses accordingly.</p> <p>On one hand, the <code>Cancel on Disconnect</code> mechanism is designed to mitigate risks during connection loss. For example, with CoD enabled, if a connection drops, the first-leg instrument order will be automatically canceled, eliminating the risk of an unhedged position. On the other hand, enabling this mechanism on trading connections used for second-leg instruments may lead to undesired behavior: if the connection is lost, the second-leg order will be canceled and will not be automatically re-submitted after reconnection. Hedging will only occur again if the <a href="/bot-doc/en/docs/params-description.html#p.hedge_after">Hedge (sec)</a> parameter is properly configured..</p></details></li></ul> <hr> <ul><li><details><summary><i>The exchange has suspended trading. What actions should I take in the robot? <div class="anchor-container"><span id="faq.exchange_stopped" class="anchor-target"></span> <a href="#faq.exchange_stopped" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>First and foremost, regardless of which exchange has suspended trading, do not rush to reset order statuses by clicking <a href="params-description.#p.sell_status">Sell/Buy status</a> or using the <a href="/bot-doc/en/docs/getting-started.html#portfolio_actions.reset_statuses">Reset statuses</a>. menu option. Trading suspensions can occur for various reasons, not only technical ones, and exchange behavior during such events may vary significantly. We have previously observed cases where, after a trading halt on the Moscow Exchange, a client immediately reset order statuses in the robot. Then, 10‚Äì30 minutes later, trading resumed, but the client had to manually cancel outstanding orders via the terminal‚Äîorders the robot had &quot;forgotten&quot; due to the status reset.</p> <p>Since trading halts on any exchange can happen for multiple reasons, there is no universal action algorithm for such situations. Our platform employs a comprehensive monitoring system that tracks numerous robot parameters: availability of trading and market data connections, orders stuck in intermediate statuses, order submission/cancellation errors not covered by standard categories, etc. Thanks to this system, we are often aware of trading halts on the Moscow Exchange before receiving notifications from brokers. This information is analyzed promptly, and in case of an exchange failure, we send out user notifications detailing the necessary steps.</p></details></li></ul> <hr> <ul><li><details><summary><i>My portfolio trades and logs have disappeared. What's the cause? <div class="anchor-container"><span id="faq.lost_deals" class="anchor-target"></span> <a href="#faq.lost_deals" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>There are two main reasons: deleting a portfolio by the user and deleting data older than six months. If you delete a portfolio from the robot, the associated trades and logs will not be displayed in the corresponding widgets. Historical data on trades, financial results, and logs is stored for six months, and older data is deleted. If a portfolio has not been deleted, trading was performed recently, and no information about this portfolio is updated in the widgets, please contact technical support with a detailed description of the situation, including screenshots of the problem and a detailed description.</p></details></li></ul> <hr> <ul><li><details><summary><i>When using order book trading, the actual spread is worse than the calculated spread, even though there are no stops. <div class="anchor-container"><span id="faq.wrong_price" class="anchor-target"></span> <a href="#faq.wrong_price" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É" class="anchor-link">#</a></div></i></summary> <p>You need to check the <a href="/bot-doc/en/docs/params-description.html#s.ob_c_p_t">Calc price OB</a> and <a href="/bot-doc/en/docs/params-description.html#s.ob_t_p_t">Trading price OB</a> parameters. This situation may occur due to differences in the specified values ‚Äã‚Äãfor this parameter.</p> <p>For example, the <a href="/bot-doc/en/docs/params-description.html#s.ob_c_p_t">Calc price OB</a> parameter is set to &quot;Weighted avg.&quot; This is the weighted average price up to and including the order book level at which the desired volume was acquired.</p> <p>And for the <a href="/bot-doc/en/docs/params-description.html#s.ob_t_p_t">Trading price OB</a> parameter, the Deepest value is selected. This is the price of the level in the order book at which the desired volume was reached.</p> <p>Let's assume the second leg is a buy order, and an offer order is placed. Here are the sell orders in the order book:</p> <p>103 - 5</p> <p>102 - 2</p> <p>101 - 2</p> <p>100 - 1 is the offer.</p> <p>Let's say the volume what we needed is 6.
This means you can satisfy it no earlier than at a price of 103.
But in the <a href="/bot-doc/en/docs/params-description.html#p.sell">sell/buy</a> calculations, you use the weighted average price (Weighted Avg), i.e. <code>(103 * 1 + 102 * 2 + 101 * 2 + 100 * 1) / 6 = 101.5</code>.
Then you place an order at the deepest price, that is, at 103.
In other words, you're buying at a price that's clearly higher than the price you used in your calculations.</p></details></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/bot-doc/en/docs/comparison.html" class="prev">
        12. Comparison of C++ Formulas and WebSocket API
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/bot-doc/assets/js/app.9ff887b2.js" defer></script><script src="/bot-doc/assets/js/2.838bb34b.js" defer></script><script src="/bot-doc/assets/js/48.a5af94a9.js" defer></script><script src="/bot-doc/assets/js/26.6f356218.js" defer></script>
  </body>
</html>
